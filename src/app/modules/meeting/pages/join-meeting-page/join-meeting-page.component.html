<ng-container *mobxAutorun>
	<div class="container mx-auto pt-3.5">
		<div class="content-wrapper" *ngIf="showPreview; else showPreview">
			<img src="/assets/images/Frame.png" alt="image" class="mx-auto max-w-2xl" />
			<div class="form mx-auto max-w-2xl bg-gray-300 rounded-md mt-5">
				<div class="form-control">
					<label for="">{{ 'meeting.join-meeting-page.passcode' | translate }}</label>
					<div class="flex mt-2 form-control-top">
						<mat-form-field appearance="fill" class="w-2/3">
							<mat-label>{{ 'meeting.join-meeting-page.enter-passcode' | translate }}</mat-label>
							<input matInput />
						</mat-form-field>
						<button (click)="joinMeeting()" mat-raised-button style="width: 20em; margin-left: 1rem; height: 55px" color="primary">
							{{ 'meeting.join-meeting-page.join-meeting-btn' | translate }}
						</button>
					</div>
					<div class="new-meeting">
						<button (click)="createNewMeeting()" mat-raised-button color="warn" style="width: 100%; height: 55px">{{ 'meeting.join-meeting-page.start-meeting-btn' | translate }}</button>
					</div>
				</div>
			</div>
		</div>
	</div>
</ng-container>

<ng-template #showPreview>
	<h3 class="text-center">{{ 'meeting.join-meeting-page.ready-to-join' | translate }}</h3>
	<div class="content-preview" *ngIf="!meetingViewModel.isLoadingSuccess">
		<div class="zoom-preview flex">
			<!-- You can use any height or width you wish for the preview -->
			<video id="js-preview-video" class="preview-video w-2/3 pr-3" playsinline="" muted="" data-video="0"></video>
			<div class="tab-setting" class="w-1/3">
				<div class="item w-full">
					<mat-tab-group>
						<mat-tab [label]="'meeting.join-meeting-page.audio-video' | translate">
							<div class="pt-4">
								<div class="camera-list">
									<h4 class="mb-0">{{ 'meeting.join-meeting-page.camera' | translate }}</h4>
									<mat-form-field appearance="fill">
										<mat-label>{{ 'meeting.join-meeting-page.select-camera' | translate }}</mat-label>
										<mat-select [(value)]="meetingViewModel.selectedCamera" [panelClass]="'select-device'">
											<mat-option *ngFor="let item of meetingViewModel.cameraList" [value]="item.deviceId">{{ item.label }}</mat-option>
										</mat-select>
									</mat-form-field>
								</div>
								<div class="mic-list">
									<h4 class="mb-0">{{ 'meeting.join-meeting-page.microphone' | translate }}</h4>
									<mat-form-field appearance="fill">
										<mat-label>{{ 'meeting.join-meeting-page.select-mics' | translate }}</mat-label>
										<mat-select [(value)]="meetingViewModel.selectedMic" [panelClass]="'select-device'">
											<mat-option *ngFor="let item of meetingViewModel.micList" [value]="item.deviceId">{{ item.label }}</mat-option>
										</mat-select>
									</mat-form-field>
								</div>
							</div>
							<div class="speaker-list">
								<h4 class="mb-0">{{ 'meeting.join-meeting-page.speaker' | translate }}</h4>
								<mat-form-field appearance="fill">
									<mat-label>{{ 'meeting.join-meeting-page.select-speaker' | translate }}</mat-label>
									<mat-select [(value)]="meetingViewModel.selectedSpeaker" [panelClass]="'select-device'">
										<mat-option *ngFor="let item of meetingViewModel.speakerList" [value]="item.deviceId">{{ item.label }}</mat-option>
									</mat-select>
								</mat-form-field>
							</div>
						</mat-tab>
						<mat-tab [label]="'meeting.join-meeting-page.background' | translate">{{ 'meeting.join-meeting-page.background' | translate }}</mat-tab>
					</mat-tab-group>
				</div>
			</div>
		</div>
	</div>
</ng-template>
